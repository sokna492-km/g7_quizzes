# Khmer Grade 7 — AI Quiz Master

<div align="center">

**AI-powered quiz app for Cambodian Grade 7 (KG7) curriculum.**  
Choose a subject and chapter, pick a difficulty, and get instant multiple-choice quizzes generated by Google Gemini. Track progress, streaks, and history with Firebase—or play without an account.

</div>

---

## What This Project Is About

**Khmer Grade 7 — AI Quiz Master** is a web application that helps Grade 7 students in Cambodia (and anyone learning the national curriculum) practice with **AI-generated quizzes** aligned to official subjects and chapters. Teachers and parents can use it for revision; students can use it for self-study, with optional **accounts** to save **points**, **streaks**, and **quiz history**.

- **Curriculum-aligned**: 10 subjects (Mathematics, Physics, Chemistry, Biology, Khmer Literature, Moral & Civic, Earth Science, Geography, History, English), each with chapters and lesson summaries.
- **AI-generated questions**: Quizzes are created on demand by **Google Gemini** from chapter context (RAG-style), so each run can feel fresh.
- **Difficulty & timer**: Choose **Easy** (30s/question), **Medium** (45s), or **Hard** (60s) with a per-question countdown.
- **Progress & persistence**: In-progress quiz is saved to `localStorage` and (when signed in) synced so you can resume later.
- **User accounts**: Sign in with **Email** or **Google**. Profile, security (change password), and **clear history** in the dashboard.
- **PWA**: Installable as an app (e.g. on phones) with offline-capable shell and app-like experience.

---

## Features and Functions

| Feature | Description |
|--------|-------------|
| **Subject & chapter selection** | Pick one of 10 subjects, then a chapter (lesson) from the list. Chapter summaries are sent to the AI as context for quiz generation. |
| **Difficulty levels** | **Easy** (ងាយស្រួល), **Medium** (មធ្យម), **Hard** (ពិបាក). Affects both question difficulty (via AI prompt) and **time per question**: 30s, 45s, 60s. |
| **Quiz flow** | 5 multiple-choice questions per quiz. One correct answer per question; after answering (or timeout), an explanation in Khmer is shown. |
| **Timer** | Per-question countdown (30/45/60s by difficulty). Circular timer in the UI; on timeout the question is marked wrong and the app moves on. |
| **Auto-save** | Quiz progress (current question index, score, time left) is saved every 30 seconds and on each answer. Restored when reopening the app. |
| **Redo quiz** | After finishing, you can redo the same set of questions (same difficulty and timer rules) without calling the API again. |
| **Authentication** | **Email/password** (with email verification) and **Google** sign-in via Firebase Auth. Session persists in the browser. |
| **User dashboard** | View **total points**, **streak** (consecutive days), and **quiz history** (subject, chapter, difficulty, score, date). Update display name, change password, clear history, or sign out. |
| **Points & history** | Logged users earn points per correct answer; history is stored in Firestore and shown in the dashboard (e.g. last 20 entries). |
| **Theme** | Light/dark theme support (e.g. via `ThemeContext`) for comfortable study at any time. |
| **Khmer UI** | Interface and quiz content are in Khmer where appropriate (e.g. buttons, labels, explanations). |
| **PWA** | Progressive Web App: installable, with app manifest and icons (192/512). `vite-plugin-pwa` with `autoUpdate` for cache updates. |

---

## Usefulness

- **For students**: Practice by subject and chapter, control difficulty and time pressure, get instant feedback and explanations, and (optionally) track progress over time.
- **For teachers/parents**: Generate quizzes tied to specific lessons without manual question banks; reuse the same chapter for different difficulty levels.
- **For developers**: Example of **Vite + React + TypeScript** with **Gemini** (structured JSON output), **Firebase Auth + Firestore**, and a **PWA** setup—useful as a template or reference.

---

## Tech Stack

| Layer | Technology |
|-------|------------|
| **Frontend** | React 19, TypeScript, Vite 6 |
| **Styling** | CSS (e.g. `theme.css`), Tailwind-style utilities / custom classes |
| **AI** | Google Gemini API (`@google/genai`), model: `gemini-3-flash-preview`, structured JSON schema for questions |
| **Backend / Auth / DB** | Firebase (Auth: Email + Google; Firestore for user stats and quiz history) |
| **Charts** | Recharts (e.g. dashboard history) |
| **PWA** | vite-plugin-pwa (manifest, service worker, icons) |

---

## Project Structure (high level)

```
├── App.tsx                 # Main app: steps (setup → loading → quiz → result), session, auth, dashboard
├── clientContext.ts        # Client/device context (e.g. for analytics or feature flags)
├── constants.tsx           # SUBJECTS_CONFIG: subjects and chapters (id, title, summary) for RAG
├── firebaseConfig.ts       # Firebase init, Auth, Firestore
├── geminiService.ts        # generateQuiz(subject, chapterTitle, chapterSummary, difficulty) → Question[]
├── types.ts                # Subject, Difficulty, Question, QuizSession, User, UserStats, etc.
├── components/
│   ├── AuthModal.tsx       # Login / sign up (email + Google)
│   ├── FloatingBackground.tsx
│   ├── Layout.tsx          # App shell, nav
│   ├── QuizPlayer.tsx      # Quiz UI: timer, options, explanations, next, progress save
│   ├── SubjectCard.tsx     # Subject/chapter selection
│   └── UserDashboard.tsx    # Profile, security, history, points, streak
├── context/
│   └── ThemeContext.tsx    # Theme (e.g. light/dark)
├── public/                 # PWA icons, favicon, etc.
├── scripts/                # PWA icon generation
├── firestore.rules         # Firestore security rules
├── .env.example            # Example env vars (see below for Vite naming)
└── README.md                # This file
```

---

## Run Locally

**Prerequisites:** Node.js (see `.nvmrc` if you use nvm; project targets Node ≥20).

1. **Clone and install**
   ```bash
   git clone <your-repo-url>
   cd kg7
   npm install
   ```

2. **Environment variables**  
   Create a `.env.local` (or `.env`) in the project root. Vite only exposes variables prefixed with `VITE_` to the client. Use:

   - **Gemini**
     - `VITE_GEMINI_API_KEY` — Get an API key from [Google AI Studio](https://aistudio.google.com/).
   - **Firebase**
     - `VITE_FIREBASE_API_KEY`
     - `VITE_FIREBASE_AUTH_DOMAIN`
     - `VITE_FIREBASE_PROJECT_ID`
     - `VITE_FIREBASE_STORAGE_BUCKET`
     - `VITE_FIREBASE_MESSAGING_SENDER_ID`
     - `VITE_FIREBASE_APP_ID`
     - `VITE_FIREBASE_MEASUREMENT_ID` (optional)

   You can copy `.env.example` and rename keys to the `VITE_` form above (and set your own values).

3. **Run the app**
   ```bash
   npm run dev
   ```
   Default dev server: `http://localhost:3000`.

4. **Build for production**
   ```bash
   npm run build
   npm run preview   # optional: preview production build
   ```

5. **PWA icons** (optional, if you change assets)
   ```bash
   npm run pwa:icons
   # or
   npm run pwa:icons:from-svg
   ```

---

## Deploy

- The app is static (Vite build) + Firebase (Auth + Firestore). You can deploy the `dist/` folder to **Vercel**, **Firebase Hosting**, **Netlify**, or any static host.
- Ensure production env has the same `VITE_*` variables set in the hosting dashboard.
- Configure **Firebase Auth** (Email/Password and Google) and **Firestore** (and `firestore.rules`) in the Firebase Console.

---

## License and Contributing

- Check the repository for a license file. If you want to contribute, open an issue or submit a pull request and follow any guidelines in the repo.

---

**Summary for Git / newcomers:**  
This repo is a **Grade 7 (Cambodia) quiz web app**: pick subject and chapter, choose difficulty (Easy 30s / Medium 45s / Hard 60s per question), get **5 AI-generated multiple-choice questions** from **Gemini**, answer with a countdown timer, and optionally sign in with **Firebase** to keep **points**, **streaks**, and **history**. Built with **React**, **Vite**, **TypeScript**, **Firebase**, and **Gemini**, and installable as a **PWA**.
